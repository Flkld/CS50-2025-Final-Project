{% extends 'layout.html' %}
{% block title %}Biblioteca{% endblock %}

{% block content %}
<h2 class='mt-3'>Mi biblioteca</h2>

<table class='table table-striped align-middle'>
  <thead>
    <tr>
      <th>Portada</th>
      <th>Título</th>
      <th>Autor</th>
      <th>Género</th>
      <th>Páginas</th>
      <th>Estado</th>
    </tr>
  </thead>
  <tbody>
    {% for l in libros %}
    <tr>
      <td style='width:70px'>
        {% if l.url_portada %}
          <img src='{{ l.url_portada }}' alt='portada' class='img-fluid rounded' />
        {% endif %}
      </td>
    <td>{{ l.titulo }}</td>
      <td>{{ l.autor }}</td>
      <td>{{ l.genero or 'N/D' }}</td>
      <td>{{ l.paginas }}</td>
      <td>
       {% set color = 'text-bg-warning' if (l.estado is none or l.estado == 'To Be Read') 
              else 'text-bg-info' if l.estado == 'Reading' 
              else 'text-bg-success' if l.estado == 'Read' %}
<span class='badge {{ color }}'>
  {{ 'To Be Read' if l.estado is none else l.estado }}
</span>
      </td>
      <td>
        <form action='/cambiar_estado/{{ l.id }}' method='post' class='d-inline'>
<button class='btn btn-sm btn-outline-primary' type='submit' {% if l.estado == 'Reading' %}  hidden {% endif %}>
    {% if l.estado== 'Read'%}
    Volver a leer
    {% else %}
    Comenzar a leer
    {% endif %}
</button>           
            </button>
        </form>
      </td>
    </tr>
    {% endfor %}
   
  </tbody>
</table>
 {% endblock %}